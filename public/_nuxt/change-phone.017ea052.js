import{a as x,A as b,b as c,C as B,o as A,l as y,j as o,f as u,h as V,U as f,V as w,y as $,W as k,k as _,X as U,Y as E,Z as I,$ as S}from"./entry.6c62f0da.js";const j={class:"flex items-center justify-between sticky"},z={class:"flex items-center space-x-2"},N=o("h1",{class:"text-xl font-bold"},"\u4FEE\u6539\u865F\u78BC",-1),R=o("span",{class:"pr-1 duration-150"}," \u9001\u51FA ",-1),H={class:"py-3"},P=["for"],T={class:"flex flex-wrap"},Y=x({__name:"change-phone",setup(W){const e=b({area:"+886",phone:"",verifyCode:""}),d=c("message"),l=c("alert"),p=c("loading"),h=async()=>{if(!e.phone.length)return d.value="\u5C1A\u672A\u8F38\u5165\u624B\u6A5F\u865F\u78BC";if(!U.test(e.phone))return d.value="\u865F\u78BC\u683C\u5F0F\u932F\u8AA4";p.value=!0;const{data:s,error:t,message:a}=await f("/auth/change-captcha",{body:{area:e.area,phone:e.phone}});p.value=!1,t&&a&&(l.value={type:"error",text:a,center:!0}),s&&(l.value={type:"success",title:"\u767C\u9001\u6210\u529F\uFF0C\u8ACB\u7559\u610F\u624B\u6A5F\u7C21\u8A0A"})},g=B(),m=async()=>{const s=c("loading");s.value=!0;const{data:t,error:a,message:r}=await f("/user/change-phone",{body:e});if(s.value=!1,a&&r&&(l.value={type:"error",text:r,center:!0}),t){l.value={type:"success",title:"\u4FEE\u6539\u6210\u529F",action:()=>g.go(-1)};const{user:i}=w();i.updateField({phone:e.phone})}},F=["+1","+1264","+1268","+1441","+1473","+1758","+1767","+1876","+20","+212","+233","+234","+237","+243","+248","+249","+250","+254","+256","+261","+297","+30","+32","+33","+34","+351","+352","+353","+354","+358","+380","+381","+389","+39","+40","+41","+43","+44","+45","+46","+47","+49","+502","+503","+504","+505","+507","+509","+52","+54","+55","+57","+58","+591","+595","+598","+60","+61","+62","+64","+65","+66","+674","+675","+676","+679","+7","+7","+81","+82","+852","+853","+86","+880","+886","+90","+91","+92","+93","+94","+960","+962","+964","+965","+966","+967","+967","+971","+973","+975","+975","+995","+998"];return(s,t)=>{const a=$,r=E,i=I,C=S,v=k;return A(),y("div",null,[o("div",j,[o("div",z,[o("div",{class:"flex items-center cursor-pointer",onClick:t[0]||(t[0]=n=>s.$router.go(-1))},[u(a,{class:"i-ic-round-arrow-back-ios text-sm lg:text-base"})]),N]),o("div",{class:"group rounded-full cursor-pointer bg-green-500 text-white font-bold px-4 lg:h-9 lg:leading-9 h-7 leading-7 flex items-center lg:text-base text-sm",onClick:m},[R,u(a,{class:"i-ic-round-arrow-forward-ios"})])]),o("div",H,[u(v,{onSubmit:m},{default:V(()=>[o("div",null,[o("div",{class:_(["flex items-center mb-2",s.labelSize])},[o("label",{for:s.phone,class:_(["block font-bold tracking-wide",[{"cursor-pointer":"phone"}]]),textContent:"\u624B\u6A5F"},null,8,P)],2),o("div",T,[u(r,{class:"mr-2 w-24",id:"phone",options:F,selected:e.area,modelValue:e.area,"onUpdate:modelValue":t[1]||(t[1]=n=>e.area=n)},null,8,["selected","modelValue"]),u(i,{id:"phone",modelValue:e.phone,"onUpdate:modelValue":t[2]||(t[2]=n=>e.phone=n),class:"mb-3 flex-1","is-phone":!0,onCaptcha:h},null,8,["modelValue"])])]),u(C,{id:"captcha",modelValue:e.verifyCode,"onUpdate:modelValue":t[3]||(t[3]=n=>e.verifyCode=n),class:"mb-10",label:"\u9A57\u8B49\u78BC",placeholder:"\u8ACB\u8F38\u5165\u624B\u6A5F\u9A57\u8B49\u78BC"},null,8,["modelValue"])]),_:1})])])}}});export{Y as default};
