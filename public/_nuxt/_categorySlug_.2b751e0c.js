import{_ as T}from"./Filter.vue.de9696c9.js";import{_ as H}from"./Title.vue.b3a573c5.js";import{_ as I}from"./Header.882808b6.js";import{_ as U}from"./Row.a0af2e80.js";import{d as E,N as F,r as p,R as y,o as c,c as m,g as o,w as r,V as b,h as t,f,e as x,n as O,a as N,p as W,z as j}from"./entry.c5c9e8cb.js";import{_ as q,a as G,b as J}from"./Wrapper.c086e4e7.js";import"./RowLoading.fe7f4138.js";const K=N("span",{class:"pr-1 align-middle"},"看更多 ",-1),M=N("p",null,"載入更多",-1),Q=[M],X={key:2,class:"text-center pt-8 text-xs font-bold tracking-widest opacity-50"},rt=E({__name:"[categorySlug]",async setup(Y){var k;let e,i;const C=F(),{categorySlug:n}=C.params,v=p(null),{data:L}=([e,i]=y(()=>b(`category-slug-${n}`,"/category/info",{async:!0,body:{slug:n}})),e=await e,i(),e);v.value=L.value.data;const _=p([]),{data:B}=([e,i]=y(()=>b(`category-video-news-${n}`,"/news/list",{async:!0,body:{category:n,type:12,size:8}})),e=await e,i(),e);_.value=(k=B.value)==null?void 0:k.data;const a=p(),{data:P}=([e,i]=y(()=>b(`category-normal-news-${n}`,"/news/page",{async:!0,body:{category:n,type:11,size:8}})),e=await e,i(),e);a.value=P.value.data;const d=p(!1),h=async()=>{d.value=!0;const w=a.value.pagination.page,g=a.value.pagination.size,{data:l}=await $fetch("/api/news/page",{method:"POST",body:{category:n,type:11,size:g,page:w+1}}),s=(l==null?void 0:l.list)??[];setTimeout(()=>{s&&s.length&&(a.value.list.push(...s),a.value.pagination=l.pagination??a.value.pagination),d.value=!1},300)};return(w,g)=>{const l=T,s=H,S=I,z=U,V=W,A=j,$=G,D=J,R=q;return c(),m("div",null,[o(R,null,{default:r(()=>[o(S,{class:"z-10 sticky border-b bg-white border-gray-900/10 top-12 dark:bg-gray-900 dark:border-gray-700"},{default:r(()=>{var u;return[o(s,{tag:"h1",title:(u=t(v))==null?void 0:u.name,class:"capitalize"},{default:r(()=>[o(l)]),_:1},8,["title"])]}),_:1}),o(D,null,{default:r(()=>[t(_)&&t(_).length?(c(),f($,{key:0},{default:r(()=>[o(s,{tag:"h2",title:"影音新聞",class:"mb-2 capitalize"}),o(z,{tag:"h3",list:t(_),gap:3},null,8,["list"]),o(A,{to:`/news/video/${t(n)}`,class:"dark:text-gray-400 block border-t py-4 mt-3 font-bold text-center text-xs text-gray-500 border-gray-200 dark:border-gray-800 duration-300 border-b hover:bg-gray-100 dark:hover:bg-gray-800"},{default:r(()=>[K,o(V,{class:"i-uil-angle-double-right text-lg align-middle"})]),_:1},8,["to"])]),_:1})):x("",!0),t(a)?(c(),f($,{key:1},{default:r(()=>[t(a).length?(c(),f(s,{key:0,title:"更多新聞",class:"mb-2"})):x("",!0),o(z,{tag:"h3",list:t(a).list??[],infinite:!0,loading:t(d),onLoad:h},null,8,["list","loading"]),t(a).pagination.total>t(a).pagination.size*t(a).pagination.page?(c(),m("div",{key:1,class:O(["block py-4 mt-3 text-xs font-bold text-center text-gray-500 duration-300 border-t border-b border-gray-300 dark:text-gray-400 dark:border-gray-800 hover:bg-gray-100 dark:hover:bg-gray-800 cursor-pointer",{hidden:t(d)}]),onClick:g[0]||(g[0]=u=>h())},Q,2)):(c(),m("div",X," 無更多資料... "))]),_:1})):x("",!0)]),_:1})]),_:1})])}}});export{rt as default};
