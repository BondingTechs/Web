import{_ as V}from"./Filter.vue.77c4b053.js";import{_ as E}from"./Title.vue.6ae9b013.js";import{_ as I}from"./Header.1fe5d536.js";import{_ as R}from"./Row.0e45151c.js";import{f as U,S as j,p,G as y,o as _,c as m,b as o,w as l,H as b,j as t,i as f,a as C,D as x,n as F,E as G,e as O}from"./entry.d14bdab2.js";import{_ as W,a as q,b as J}from"./Wrapper.68e6eeae.js";import"./RowLoading.957c2494.js";const K={key:2,class:"text-center pt-8 text-xs font-bold tracking-widest opacity-50"},ot=U({__name:"[categorySlug]",async setup(M){var w;let e,i;const L=j(),{categorySlug:n}=L.params,v=p(null),{data:N}=([e,i]=y(()=>b(`category-slug-${n}`,"/category/info",{async:!0,body:{slug:n}})),e=await e,i(),e);v.value=N.value.data;const d=p([]),{data:B}=([e,i]=y(()=>b(`category-video-news-${n}`,"/news/list",{async:!0,body:{category:n,type:12,size:8}})),e=await e,i(),e);d.value=(w=B.value)==null?void 0:w.data;const a=p(),{data:S}=([e,i]=y(()=>b(`category-normal-news-${n}`,"/news/page",{async:!0,body:{category:n,type:11,size:8}})),e=await e,i(),e);a.value=S.value.data;const g=p(!1),k=async()=>{g.value=!0;const h=a.value.pagination.page,s=a.value.pagination.size,{data:c}=await $fetch("/api/news/page",{method:"POST",body:{category:n,type:11,size:s,page:h+1}}),r=(c==null?void 0:c.list)??[];setTimeout(()=>{r&&r.length&&(a.value.list.push(...r),a.value.pagination=c.pagination??a.value.pagination),g.value=!1},300)};return(h,s)=>{const c=V,r=E,D=I,z=R,P=G,A=O,$=q,H=J,T=W;return _(),m("div",null,[o(T,null,{default:l(()=>[o(D,{class:"z-10 sticky border-b bg-white border-gray-900/10 top-12 dark:bg-gray-900 dark:border-gray-700"},{default:l(()=>{var u;return[o(r,{tag:"h1",title:(u=t(v))==null?void 0:u.name,class:"capitalize"},{default:l(()=>[o(c)]),_:1},8,["title"])]}),_:1}),o(H,null,{default:l(()=>[t(d)&&t(d).length?(_(),f($,{key:0},{default:l(()=>[o(r,{tag:"h2",title:"影音新聞",class:"mb-2 capitalize"}),o(z,{tag:"h3",list:t(d),gap:3},null,8,["list"]),o(A,{to:`/news/video/${t(n)}`,class:"dark:text-gray-400 block border-t py-4 mt-3 font-bold text-center text-xs text-gray-500 border-gray-200 dark:border-gray-800 duration-300 border-b hover:bg-gray-100 dark:hover:bg-gray-800"},{default:l(()=>[s[1]||(s[1]=C("span",{class:"pr-1 align-middle"},"看更多 ",-1)),o(P,{class:"i-uil-angle-double-right text-lg align-middle"})]),_:1},8,["to"])]),_:1})):x("",!0),t(a)?(_(),f($,{key:1},{default:l(()=>[t(a).length?(_(),f(r,{key:0,title:"更多新聞",class:"mb-2"})):x("",!0),o(z,{tag:"h3",list:t(a).list??[],infinite:!0,loading:t(g),onLoad:k},null,8,["list","loading"]),t(a).pagination.total>t(a).pagination.size*t(a).pagination.page?(_(),m("div",{key:1,class:F(["block py-4 mt-3 text-xs font-bold text-center text-gray-500 duration-300 border-t border-b border-gray-300 dark:text-gray-400 dark:border-gray-800 hover:bg-gray-100 dark:hover:bg-gray-800 cursor-pointer",{hidden:t(g)}]),onClick:s[0]||(s[0]=u=>k())},s[2]||(s[2]=[C("p",null,"載入更多",-1)]),2)):(_(),m("div",K," 無更多資料... "))]),_:1})):x("",!0)]),_:1})]),_:1})])}}});export{ot as default};
