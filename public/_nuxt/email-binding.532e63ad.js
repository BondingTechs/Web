import{d as v,C as h,E as w,L as y,u as l,o as k,c as $,a as e,g as a,t as C,h as i,w as S,M as V,m as B,p as E,G as F,J as U}from"./entry.bfc9bcac.js";const I={class:"flex items-center justify-between sticky"},N={class:"flex items-center space-x-2"},R={class:"text-xl font-bold"},T=e("span",{class:"lg:pr-2 duration-150 pr-1"}," 送出 ",-1),j={class:"py-3"},H=v({__name:"email-binding",setup(D){const n=h({email:""}),{user:r}=w(),{info:g}=y(r),c=l("loading"),m=l("alert"),u=l("message"),d=async()=>{const{email:s}=n;if(!s.length)return u.value="欄位不能留空";if(!V.test(s))return u.value="信箱格式錯誤";c.value=!0;const{error:t,message:o}=await B("/user/email-binding",{body:{email:s}});return c.value=!1,t&&o?m.value={type:"error",text:o,center:!0}:(r.updateField({emailStatus:18}),m.value={type:"success",title:"已發送驗證信，請至信箱查收"})};return(s,t)=>{var p,_;const o=E,x=U,b=F;return k(),$("div",null,[e("div",I,[e("div",N,[e("div",{class:"flex items-center cursor-pointer",onClick:t[0]||(t[0]=f=>s.$router.go(-1))},[a(o,{class:"i-ic-round-arrow-back-ios text-sm lg:text-base"})]),e("h1",R,C((_=(p=i(g))==null?void 0:p.email)!=null&&_.length?"修改":"綁定")+"Email ",1)]),e("div",{class:"group rounded-full cursor-pointer bg-green-500 text-white font-bold px-4 lg:h-9 lg:leading-9 h-7 leading-7 flex items-center lg:text-base text-sm",onClick:d},[T,a(o,{class:"i-ic-round-arrow-forward-ios"})])]),e("div",j,[a(b,{onSubmit:d},{default:S(()=>[a(x,{id:"email",modelValue:i(n).email,"onUpdate:modelValue":t[1]||(t[1]=f=>i(n).email=f),label:"Email",class:"mb-3",placeholder:"example@domain.com"},null,8,["modelValue"])]),_:1})])])}}});export{H as default};
