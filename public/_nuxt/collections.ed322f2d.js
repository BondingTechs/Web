import{d as N,r as u,Q as R,R as S,m,S as V,o as i,c,a as n,g as y,F as b,b as A,h as t,e as x,k as f,v as h,p as D,n as L,t as E}from"./entry.c4990671.js";import{_ as H}from"./Row.b67b365e.js";import{_ as I}from"./Row.vue.f382793c.js";import"./RowLoading.b00c7487.js";const M={class:"flex items-center sticky mb-3"},P=n("h1",{class:"text-lg lg:text-xl font-bold"},"我的收藏",-1),Q={class:"flex flex-wrap items-center space-x-4 text-sm mb-3"},T=["onClick"],U={class:"py-3"},j={key:0},q={key:1},G=n("p",null,"載入更多",-1),J=[G],K={class:"text-center pt-8 text-xs font-bold tracking-widest opacity-50"},k=10,et=N({__name:"collections",async setup(O){let p,g;const l=u([]),e=u({}),w=u([{label:"新聞",value:"article"},{label:"小知識",value:"tip"}]),r=u("article"),a=u(!0),v=R(()=>e.value.total<=e.value.size*e.value.page);try{const{data:s}=([p,g]=S(()=>m("/my/collections",{body:{size:k,type:r.value}})),p=await p,g(),p);l.value=s.list,e.value=s.pagination,a.value=!1}catch{}const C=()=>{l.value=[],e.value={}};V(r,async s=>{a.value=!0,C();const{data:o}=await m("/my/collections",{body:{size:k,type:s}});l.value=o.list,e.value=o.pagination,a.value=!1});const z=async()=>{if(v.value||a.value)return;a.value=!0;const s=e.value.page,o=e.value.size,{data:_}=await m("/my/collections",{body:{size:o,page:s}});l.value.push(..._.list),e.value=_.pagination,a.value=!1};return(s,o)=>{const _=D,$=H,B=I;return i(),c("div",null,[n("div",M,[n("div",{class:"lg:hidden mr-2 flex items-center cursor-pointer",onClick:o[0]||(o[0]=d=>s.$router.go(-1))},[y(_,{class:"i-ic-round-arrow-back-ios text-sm lg:text-base"})]),P]),n("div",Q,[(i(!0),c(b,null,A(t(w),(d,F)=>(i(),c("div",{key:F,class:L(["cursor-pointer h-8 leading-8 px-5 border border-gray-200 dark-border-opacity-20 rounded-full duration-200",{"bg-gray-200 dark:bg-opacity-10":t(r)===d.value}]),onClick:W=>r.value=d.value},E(d.label),11,T))),128))]),n("div",U,[t(r)==="article"?(i(),c("div",j,[y($,{tag:"h3",list:t(l)??[],infinite:!0,loading:t(a)},null,8,["list","loading"])])):t(r)==="tip"?(i(),c("div",q,[y(B,{list:t(l)??[]},null,8,["list"])])):x("",!0),t(a)?x("",!0):(i(),c(b,{key:2},[f(n("div",{class:"dark:text-gray-400 block border-t py-4 mt-3 font-bold text-center text-xs text-gray-500 border-gray-200 dark:border-gray-800 duration-300 border-b hover:bg-gray-100 dark:hover:bg-gray-800 cursor-pointer",onClick:o[1]||(o[1]=d=>z())},J,512),[[h,!t(v)]]),f(n("div",K," 無更多資料... ",512),[[h,t(v)]])],64))])])}}});export{et as default};
