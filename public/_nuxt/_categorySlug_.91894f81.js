import{_ as B}from"./Filter.vue.77c4b053.js";import{_ as C}from"./Title.vue.6ae9b013.js";import{_ as S}from"./Header.1fe5d536.js";import{_ as N}from"./Row.0e45151c.js";import{_ as A,a as H,b as T}from"./Wrapper.68e6eeae.js";import{f as P,S as R,p as y,G as f,o as u,i as V,w as i,H as b,b as s,j as o,c as x,a as j,n as D}from"./entry.d14bdab2.js";import"./RowLoading.957c2494.js";const E={key:1,class:"text-center pt-8 text-xs font-bold tracking-widest opacity-50"},K=P({__name:"[categorySlug]",async setup(F){let e,l;const v=R(),{categorySlug:r}=v.params,g=y(null),{data:k}=([e,l]=f(()=>b(`category-slug-${r}`,"/category/info",{async:!0,body:{slug:r}})),e=await e,l(),e);g.value=k.value.data;const{data:t}=([e,l]=f(()=>b(`category-video-news-${r}`,"/news/list",{async:!0,body:{category:r,type:"video",size:8}})),e=await e,l(),e),c=y(!1),d=async()=>{c.value=!0;const m=t.value.pagination.page,a=t.value.pagination.size,{data:n}=await $fetch("/api/news/page",{method:"POST",body:{category:r,type:"normal",size:a,page:m+1}}),p=(n==null?void 0:n.list)??[];setTimeout(()=>{p.length&&(t.value.list.push(...p),t.value.pagination=n.pagination??t.value.pagination),c.value=!1},300)};return(m,a)=>{const n=B,p=C,w=S,h=N,z=H,L=T,$=A;return u(),V($,null,{default:i(()=>[s(w,{class:"z-10 sticky border-b bg-white border-gray-900/10 top-12 dark:bg-gray-900 dark:border-gray-700 lg:-mx-0 lg:px-0 -mx-4 px-4"},{default:i(()=>{var _;return[s(p,{tag:"h1",title:(_=o(g))==null?void 0:_.name,class:"capitalize"},{default:i(()=>[s(n)]),_:1},8,["title"])]}),_:1}),s(L,null,{default:i(()=>[s(z,null,{default:i(()=>[s(h,{tag:"h3",list:o(t).list??[],infinite:!0,loading:o(c),onLoad:d},null,8,["list","loading"]),o(t).pagination.total>o(t).pagination.size*o(t).pagination.page?(u(),x("div",{key:0,class:D(["block py-4 mt-3 text-xs font-bold text-center text-gray-500 duration-300 border-t border-b border-gray-300 dark:text-gray-400 dark:border-gray-800 hover:bg-gray-100 dark:hover:bg-gray-800 cursor-pointer",{hidden:o(c)}]),onClick:a[0]||(a[0]=_=>d())},a[1]||(a[1]=[j("p",null,"載入更多",-1)]),2)):(u(),x("div",E," 無更多資料... "))]),_:1})]),_:1})]),_:1})}}});export{K as default};
