import{_ as B}from"./Filter.vue.6b384788.js";import{_ as C}from"./Title.vue.e670e7e3.js";import{_ as N}from"./Header.98f09a40.js";import{_ as S}from"./Row.28b8a3c1.js";import{_ as A,a as T,b as H}from"./Wrapper.6de95a67.js";import{g as I,U as P,s as y,I as f,o as u,j as R,w as r,J as b,b as n,k as o,c as x,n as U,a as V}from"./entry.3fc94d53.js";import"./RowLoading.9c0b152c.js";const j=V("p",null,"載入更多",-1),D=[j],E={key:1,class:"text-center pt-8 text-xs font-bold tracking-widest opacity-50"},Q=I({__name:"[categorySlug]",async setup(F){let e,i;const v=P(),{categorySlug:s}=v.params,g=y(null),{data:k}=([e,i]=f(()=>b(`category-slug-${s}`,"/category/info",{async:!0,body:{slug:s}})),e=await e,i(),e);g.value=k.value.data;const{data:t}=([e,i]=f(()=>b(`category-video-news-${s}`,"/news/list",{async:!0,body:{category:s,type:"video",size:8}})),e=await e,i(),e),c=y(!1),d=async()=>{c.value=!0;const m=t.value.pagination.page,l=t.value.pagination.size,{data:a}=await $fetch("/api/news/page",{method:"POST",body:{category:s,type:"normal",size:l,page:m+1}}),_=(a==null?void 0:a.list)??[];setTimeout(()=>{_.length&&(t.value.list.push(..._),t.value.pagination=a.pagination??t.value.pagination),c.value=!1},300)};return(m,l)=>{const a=B,_=C,h=N,w=S,z=T,L=H,$=A;return u(),R($,null,{default:r(()=>[n(h,{class:"z-10 sticky border-b bg-white border-gray-900/10 top-12 dark:bg-gray-900 dark:border-gray-700 lg:-mx-0 lg:px-0 -mx-4 px-4"},{default:r(()=>{var p;return[n(_,{tag:"h1",title:(p=o(g))==null?void 0:p.name,class:"capitalize"},{default:r(()=>[n(a)]),_:1},8,["title"])]}),_:1}),n(L,null,{default:r(()=>[n(z,null,{default:r(()=>[n(w,{tag:"h3",list:o(t).list??[],infinite:!0,loading:o(c),onLoad:d},null,8,["list","loading"]),o(t).pagination.total>o(t).pagination.size*o(t).pagination.page?(u(),x("div",{key:0,class:U(["block py-4 mt-3 text-xs font-bold text-center text-gray-500 duration-300 border-t border-b border-gray-300 dark:text-gray-400 dark:border-gray-800 hover:bg-gray-100 dark:hover:bg-gray-800 cursor-pointer",{hidden:o(c)}]),onClick:l[0]||(l[0]=p=>d())},D,2)):(u(),x("div",E," 無更多資料... "))]),_:1})]),_:1})]),_:1})}}});export{Q as default};
