import{g as w,h as C,K as u,l as V,o as k,c as U,a as o,b as r,w as $,L as f,M as F,H as I,N as S,n as h,k as n,O as B,P as N,Q as R,R as z}from"./entry.0384da62.js";const H={class:"flex items-center justify-between sticky"},P={class:"flex items-center space-x-2"},j=o("h1",{class:"text-xl font-bold"},"修改號碼",-1),E=o("span",{class:"pr-1 duration-150"}," 送出 ",-1),K={class:"py-3"},L=["for"],M={class:"flex flex-wrap"},T=w({__name:"change-phone",setup(O){const e=C({area:"+886",phone:"",verifyCode:""}),p=u("message"),c=u("alert"),m=u("loading"),g=async()=>{if(!e.phone.length)return p.value="尚未輸入手機號碼";if(!B.test(e.phone))return p.value="號碼格式錯誤";m.value=!0;const{data:s,error:t,message:a}=await f("/auth/change-captcha",{body:{area:e.area,phone:e.phone}});m.value=!1,t&&a&&(c.value={type:"error",text:a,center:!0}),s&&(c.value={type:"success",title:"發送成功，請留意手機簡訊"})},x=V(),_=async()=>{const s=u("loading");s.value=!0;const{data:t,error:a,message:i}=await f("/user/change-phone",{body:e});if(s.value=!1,a&&i&&(c.value={type:"error",text:i,center:!0}),t){c.value={type:"success",title:"修改成功",action:()=>x.go(-1)};const{user:d}=F();d.updateField({phone:e.phone})}},v=["+1","+1264","+1268","+1441","+1473","+1758","+1767","+1876","+20","+212","+233","+234","+237","+243","+248","+249","+250","+254","+256","+261","+297","+30","+32","+33","+34","+351","+352","+353","+354","+358","+380","+381","+389","+39","+40","+41","+43","+44","+45","+46","+47","+49","+502","+503","+504","+505","+507","+509","+52","+54","+55","+57","+58","+591","+595","+598","+60","+61","+62","+64","+65","+66","+674","+675","+676","+679","+7","+7","+81","+82","+852","+853","+86","+880","+886","+90","+91","+92","+93","+94","+960","+962","+964","+965","+966","+967","+967","+971","+973","+975","+975","+995","+998"];return(s,t)=>{const a=I,i=N,d=R,b=z,y=S;return k(),U("div",null,[o("div",H,[o("div",P,[o("div",{class:"flex items-center cursor-pointer",onClick:t[0]||(t[0]=l=>s.$router.go(-1))},[r(a,{class:"i-ic-round-arrow-back-ios text-sm lg:text-base"})]),j]),o("div",{class:"group rounded-full cursor-pointer bg-green-500 text-white font-bold px-4 lg:h-9 lg:leading-9 h-7 leading-7 flex items-center lg:text-base text-sm",onClick:_},[E,r(a,{class:"i-ic-round-arrow-forward-ios"})])]),o("div",K,[r(y,{onSubmit:_},{default:$(()=>[o("div",null,[o("div",{class:h(["flex items-center mb-2",s.labelSize])},[o("label",{for:s.phone,class:h(["block font-bold tracking-wide",[{"cursor-pointer":"phone"}]]),textContent:"手機"},null,8,L)],2),o("div",M,[r(i,{class:"mr-2 w-24",id:"phone",options:v,selected:n(e).area,modelValue:n(e).area,"onUpdate:modelValue":t[1]||(t[1]=l=>n(e).area=l)},null,8,["selected","modelValue"]),r(d,{id:"phone",modelValue:n(e).phone,"onUpdate:modelValue":t[2]||(t[2]=l=>n(e).phone=l),class:"mb-3 flex-1","is-phone":!0,onCaptcha:g},null,8,["modelValue"])])]),r(b,{id:"captcha",modelValue:n(e).verifyCode,"onUpdate:modelValue":t[3]||(t[3]=l=>n(e).verifyCode=l),class:"mb-10",label:"驗證碼",placeholder:"請輸入手機驗證碼"},null,8,["modelValue"])]),_:1})])])}}});export{T as default};
