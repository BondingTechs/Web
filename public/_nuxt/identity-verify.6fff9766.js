import{a as b,r as w,A as C,e as B,b as y,o as f,l as _,j as s,k as x,t as F,z as A,u as $,U as h,q as k,C as S,f as m,h as V,a3 as E,y as I,W as U,V as q,Z as D}from"./entry.6c62f0da.js";const z=["for","textContent"],R={key:0},j=["src"],N={key:1,class:"p-c text-xs"},H=["id","required"],L=b({__name:"Image",props:{modelValue:{type:String,default:""},label:{type:String,default:""},id:{type:String,default:""},required:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(u,{emit:a}){const o=w(""),l=C({lg:"text-base",md:"text-sm",sm:"text-xs",xs:"text-xs"}),g=B(()=>l.md),v=y("message"),p=async e=>{const t=new FormData;t.append("file",e);const{data:d,error:n,message:c}=await h("/comm/upload",{body:t,multipart:!0});return n?v.value=c:d},i=async e=>{const t=e.target;if(t.files&&t.files[0]){const d=await p(t.files[0]);a("update:modelValue",d);const n=new FileReader;n.onload=c=>{var r;o.value=((r=c.target)==null?void 0:r.result)||""},n.readAsDataURL(t.files[0])}};return(e,t)=>(f(),_("div",null,[s("div",{class:x(["flex items-center mb-2",$(g)])},[s("label",{for:u.id,class:x(["block font-bold tracking-wide",[{"cursor-pointer":u.id}]]),textContent:F(u.label)},null,10,z),A(e.$slots,"label",{},void 0,!0)],2),s("div",{class:x(["relative border border-gray-300 border-opacity-40 rounded dark:bg-white/[0.05] bg-gray-100",{model:!o.value}])},[o.value.length>0?(f(),_("div",R,[s("img",{class:"preview w-full h-full",src:o.value},null,8,j)])):(f(),_("div",N," \u9EDE\u64CA\u4E0A\u50B3\u5716\u7247 ")),s("input",{id:u.id,type:"file",accept:"image/*",class:"absolute w-full h-full cursor-pointer opacity-0 top-0 left-0",required:u.required,onChange:i},null,40,H)],2)]))}});const P=k(L,[["__scopeId","data-v-d10ebd38"]]),T={class:"flex items-center justify-between sticky"},W={class:"flex items-center space-x-2"},Z=s("h1",{class:"text-xl font-bold"},"\u8EAB\u4EFD\u9A57\u8B49",-1),G=s("span",{class:"lg:pr-2 duration-150 pr-1"}," \u9001\u51FA ",-1),J={class:"py-3"},M=b({__name:"identity-verify",setup(u){const a=C({idCard:"",positive:null,negative:null}),o=y("loading"),l=y("alert"),g=S(),v=async()=>{o.value=!0;const{error:i,message:e}=await h("/user/identity-verify",{body:a,multipart:!0});if(o.value=!1,i&&e)return l.value={type:"error",text:e,center:!0};const{user:t}=q();return t.updateField({identityStatus:21,idCard:a.idCard}),l.value={type:"success",text:"\u9001\u51FA\u6210\u529F\uFF0C\u7B49\u5F85\u7BA1\u7406\u54E1\u5BE9\u6838",center:!0,action:()=>g.push("/my/account")}},p=()=>{if(!E.test(a.idCard))return l.value={type:"error",text:"\u8EAB\u5206\u8B49\u683C\u5F0F\u932F\u8AA4",center:!0};if(!a.positive)return l.value={type:"error",text:"\u5C1A\u672A\u4E0A\u50B3\u7167\u7247",center:!0};v()};return(i,e)=>{const t=I,d=D,n=P,c=U;return f(),_("div",null,[s("div",T,[s("div",W,[s("div",{class:"flex items-center cursor-pointer",onClick:e[0]||(e[0]=r=>i.$router.go(-1))},[m(t,{class:"i-ic-round-arrow-back-ios text-sm lg:text-base"})]),Z]),s("div",{class:"group rounded-full cursor-pointer bg-green-500 text-white font-bold px-4 lg:h-9 lg:leading-9 h-7 leading-7 flex items-center lg:text-base text-sm",onClick:p},[G,m(t,{class:"i-ic-round-arrow-forward-ios"})])]),s("div",J,[m(c,{class:"max-w-[28em]",onSubmit:p},{default:V(()=>[m(d,{modelValue:a.idCard,"onUpdate:modelValue":e[1]||(e[1]=r=>a.idCard=r),label:"\u8EAB\u5206\u8B49/\u8B77\u7167",class:"mb-5",require:!0},null,8,["modelValue"]),m(n,{id:"positive",modelValue:a.positive,"onUpdate:modelValue":e[2]||(e[2]=r=>a.positive=r),label:"\u7167\u7247",class:"mb-5",require:!0},null,8,["modelValue"])]),_:1})])])}}});export{M as default};
