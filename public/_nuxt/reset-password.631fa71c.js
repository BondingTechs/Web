import{f,g as x,k as g,I as p,o as _,c as b,a as o,b as r,w as v,X as P,J as V,E as y,L as C,j as n,Y as k}from"./entry.d14bdab2.js";const U={class:"flex items-center justify-between sticky"},$={class:"flex items-center space-x-2"},h={class:"py-3"},F=f({__name:"reset-password",setup(I){const s=x({oldPassword:"",newPassword:"",newPasswordConfirm:""}),w=g(),c=p("loading"),a=p("alert"),m=async()=>{const{oldPassword:i,newPassword:e,newPasswordConfirm:l}=s;if(!P.test(e))return a.value={type:"error",text:"密碼須為英數混合8位數以上",center:!0};if(!i.length||!e.length||!l.length)return a.value={type:"error",text:"欄位不能留空",center:!0};if(e!==l)return a.value={type:"error",text:"密碼不一致",center:!0};c.value=!0;const{error:d,message:u}=await V("/user/reset-password",{body:s});return c.value=!1,d&&u?a.value={type:"error",text:u,center:!0}:a.value={type:"success",title:"修改成功",action:()=>w.go(-1)}};return(i,e)=>{const l=y,d=k,u=C;return _(),b("div",null,[o("div",U,[o("div",$,[o("div",{class:"flex items-center cursor-pointer",onClick:e[0]||(e[0]=t=>i.$router.go(-1))},[r(l,{class:"i-ic-round-arrow-back-ios text-sm lg:text-base"})]),e[4]||(e[4]=o("h1",{class:"text-xl font-bold"},"修改密碼",-1))]),o("div",{class:"group rounded-full cursor-pointer bg-green-500 text-white font-bold px-4 lg:h-9 lg:leading-9 h-7 leading-7 flex items-center lg:text-base text-sm",onClick:m},[e[5]||(e[5]=o("span",{class:"lg:pr-2 duration-150 pr-1"}," 送出 ",-1)),r(l,{class:"i-ic-round-arrow-forward-ios"})])]),o("div",h,[r(u,{onSubmit:m},{default:v(()=>[r(d,{id:"old-password",modelValue:n(s).oldPassword,"onUpdate:modelValue":e[1]||(e[1]=t=>n(s).oldPassword=t),class:"mb-3",label:"舊密碼",placeholder:"請輸入舊密碼"},null,8,["modelValue"]),r(d,{id:"new-password",modelValue:n(s).newPassword,"onUpdate:modelValue":e[2]||(e[2]=t=>n(s).newPassword=t),class:"mb-3",label:"新密碼",placeholder:"長度至少為8,英數組合"},null,8,["modelValue"]),r(d,{id:"new-password-confirm",modelValue:n(s).newPasswordConfirm,"onUpdate:modelValue":e[3]||(e[3]=t=>n(s).newPasswordConfirm=t),label:"確認密碼",placeholder:"再次輸入新密碼"},null,8,["modelValue"])]),_:1})])])}}});export{F as default};
