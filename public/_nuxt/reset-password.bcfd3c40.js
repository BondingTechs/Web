import{d as f,C as _,D as x,u as p,o as g,c as b,a as o,g as r,w as v,O as P,m as h,p as V,G as y,h as n,P as C}from"./entry.c4990671.js";const k={class:"flex items-center justify-between sticky"},U={class:"flex items-center space-x-2"},$=o("h1",{class:"text-xl font-bold"},"修改密碼",-1),B=o("span",{class:"lg:pr-2 duration-150 pr-1"}," 送出 ",-1),F={class:"py-3"},R=f({__name:"reset-password",setup(I){const s=_({oldPassword:"",newPassword:"",newPasswordConfirm:""}),w=x(),c=p("loading"),a=p("alert"),m=async()=>{const{oldPassword:i,newPassword:e,newPasswordConfirm:l}=s;if(!P.test(e))return a.value={type:"error",text:"密碼須為英數混合8位數以上",center:!0};if(!i.length||!e.length||!l.length)return a.value={type:"error",text:"欄位不能留空",center:!0};if(e!==l)return a.value={type:"error",text:"密碼不一致",center:!0};c.value=!0;const{error:d,message:u}=await h("/user/reset-password",{body:s});return c.value=!1,d&&u?a.value={type:"error",text:u,center:!0}:a.value={type:"success",title:"修改成功",action:()=>w.go(-1)}};return(i,e)=>{const l=V,d=C,u=y;return g(),b("div",null,[o("div",k,[o("div",U,[o("div",{class:"flex items-center cursor-pointer",onClick:e[0]||(e[0]=t=>i.$router.go(-1))},[r(l,{class:"i-ic-round-arrow-back-ios text-sm lg:text-base"})]),$]),o("div",{class:"group rounded-full cursor-pointer bg-green-500 text-white font-bold px-4 lg:h-9 lg:leading-9 h-7 leading-7 flex items-center lg:text-base text-sm",onClick:m},[B,r(l,{class:"i-ic-round-arrow-forward-ios"})])]),o("div",F,[r(u,{onSubmit:m},{default:v(()=>[r(d,{id:"old-password",modelValue:n(s).oldPassword,"onUpdate:modelValue":e[1]||(e[1]=t=>n(s).oldPassword=t),class:"mb-3",label:"舊密碼",placeholder:"請輸入舊密碼"},null,8,["modelValue"]),r(d,{id:"new-password",modelValue:n(s).newPassword,"onUpdate:modelValue":e[2]||(e[2]=t=>n(s).newPassword=t),class:"mb-3",label:"新密碼",placeholder:"長度至少為8,英數組合"},null,8,["modelValue"]),r(d,{id:"new-password-confirm",modelValue:n(s).newPasswordConfirm,"onUpdate:modelValue":e[3]||(e[3]=t=>n(s).newPasswordConfirm=t),label:"確認密碼",placeholder:"再次輸入新密碼"},null,8,["modelValue"])]),_:1})])])}}});export{R as default};
