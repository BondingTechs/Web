import{g as F,s as u,i as L,I as N,L as y,y as A,o as r,c,a as n,b as g,F as b,E as D,k as t,G as x,V as f,W as h,H as E,n as H,t as I}from"./entry.e1c28201.js";import{_ as R}from"./Row.b0d19a64.js";import{_ as S}from"./Row.vue.21a237bd.js";import"./RowLoading.dad17bc5.js";const G={class:"flex items-center sticky mb-3"},M=n("h1",{class:"text-lg lg:text-xl font-bold"}," 我的收藏 ",-1),P={class:"flex flex-wrap items-center space-x-4 text-sm mb-3"},T=["onClick"],U={class:"py-3"},W={key:0},j={key:1},q=n("p",null,"載入更多",-1),J=[q],K={class:"text-center pt-8 text-xs font-bold tracking-widest opacity-50"},k=10,et=F({__name:"collections",async setup(O){let p,m;const l=u([]),e=u({}),w=u([{label:"新聞",value:"article"},{label:"小知識",value:"tip"}]),i=u("article"),a=u(!0),v=L(()=>e.value.total<=e.value.size*e.value.page);try{const{data:s}=([p,m]=N(()=>y("/my/collections",{body:{size:k,type:i.value}})),p=await p,m(),p);l.value=s.list,e.value=s.pagination,a.value=!1}catch{}const C=()=>{l.value=[],e.value={}};A(i,async s=>{a.value=!0,C();const{data:o}=await y("/my/collections",{body:{size:k,type:s}});l.value=o.list,e.value=o.pagination,a.value=!1});const z=async()=>{if(v.value||a.value)return;a.value=!0;const s=e.value.page,o=e.value.size,{data:_}=await y("/my/collections",{body:{size:o,page:s}});l.value.push(..._.list),e.value=_.pagination,a.value=!1};return(s,o)=>{const _=E,$=R,V=S;return r(),c("div",null,[n("div",G,[n("div",{class:"lg:hidden mr-2 flex items-center cursor-pointer",onClick:o[0]||(o[0]=d=>s.$router.go(-1))},[g(_,{class:"i-ic-round-arrow-back-ios text-sm lg:text-base"})]),M]),n("div",P,[(r(!0),c(b,null,D(t(w),(d,B)=>(r(),c("div",{key:B,class:H(["cursor-pointer h-8 leading-8 px-5 border border-gray-200 dark-border-opacity-20 rounded-full duration-200",{"bg-gray-200 dark:bg-opacity-10":t(i)===d.value}]),onClick:Q=>i.value=d.value},I(d.label),11,T))),128))]),n("div",U,[t(i)==="article"?(r(),c("div",W,[g($,{tag:"h3",list:t(l)??[],infinite:!0,loading:t(a)},null,8,["list","loading"])])):t(i)==="tip"?(r(),c("div",j,[g(V,{list:t(l)??[]},null,8,["list"])])):x("",!0),t(a)?x("",!0):(r(),c(b,{key:2},[f(n("div",{class:"dark:text-gray-400 block border-t py-4 mt-3 font-bold text-center text-xs text-gray-500 border-gray-200 dark:border-gray-800 duration-300 border-b hover:bg-gray-100 dark:hover:bg-gray-800 cursor-pointer",onClick:o[1]||(o[1]=d=>z())},J,512),[[h,!t(v)]]),f(n("div",K," 無更多資料... ",512),[[h,t(v)]])],64))])])}}});export{et as default};
